<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Australian Tourism â€” FIT3179</title>

  <!-- Vega libraries -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <style>
    /* CSS Variables */
    :root {
      --bg: #fafafa;
      --text: #222;
      --muted: #666;
      --accent: #0f766e;
      --accent-contrast: #ffffff;
      --card: #ffffff;
      --border: #e6e6e6;
      --error: #b91c1c;
    }

    /* Base Styles */
    html, body { 
      height: 100%; 
    }
    
    body { 
      margin: 0; 
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; 
      background: var(--bg); 
      color: var(--text); 
    }

    /* Layout */
    .wrap { 
      max-width: 1100px; 
      margin: 0 auto; 
      padding: 28px 20px 60px; 
    }

    /* Header */
    header {
      text-align: center;
      margin-bottom: 32px;
      position: relative;
      background-image: url('https://raw.githubusercontent.com/vmon0005/fit3179/187d23a14aa4d6d68b248accaa61021ee4c5b0f2/Australia%20Landscape%20Illustration.webp');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      border-radius: 16px;
      overflow: hidden;
      padding: 48px 20px;
    }

    header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      z-index: 1;
    }

    header > * {
      position: relative;
      z-index: 2;
    }

    header h1 {
      margin: 0;
      font-size: clamp(2.2rem, 5vw, 3.2rem);
      letter-spacing: 0.2px;
      font-weight: 700;
      background: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      padding: 16px 24px;
      border-radius: 12px;
      display: inline-block;
    }

    header p {
      margin: 24px auto 0;
      max-width: 800px;
      color: var(--text);
      font-size: 1.05rem;
      line-height: 1.6;
      background: rgba(240, 240, 240, 0.5);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      padding: 20px 28px;
      border-radius: 12px;
    }

    /* Toggle Controls */
    .controls {
      display: flex;
      justify-content: center;
      margin: 16px 0 20px;
    }

    .toggle {
      display: inline-flex;
      align-items: center;
      gap: 0;
      border: 1px solid var(--border);
      background: linear-gradient(135deg, #f0fdfa 0%, #ffffff 100%);
      border-radius: 999px;
      overflow: hidden;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
    }

    .toggle button {
      appearance: none;
      border: 0;
      padding: 10px 16px;
      font-size: 0.95rem;
      background: transparent;
      cursor: pointer;
      color: var(--muted);
      transition: background 0.15s ease, color 0.15s ease;
    }

    .toggle button.active {
      background: var(--accent);
      color: var(--accent-contrast);
    }

    .toggle button:hover:not(.active) {
      background: rgba(0, 0, 0, 0.02);
    }

    .toggle button:focus-visible {
      outline: 2px solid #2563eb;
      outline-offset: 2px;
    }

    /* Card Component */
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 14px;
      margin-bottom: 24px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.02);
    }

    /* Section Titles */
    .section-title {
      text-align: center;
      margin: 48px 0 24px;
      font-size: 1.8rem;
      font-weight: 600;
      color: var(--text);
    }

    /* Map Info Box - Above Map */
    .map-info-container {
      margin-bottom: 20px;
    }

    .map-info {
      background: linear-gradient(135deg, #f0fdfa 0%, #ffffff 100%);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px 24px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
    }

    .map-info h3 {
      margin: 0 0 12px 0;
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--accent);
    }

    .map-info p {
      margin: 0;
      line-height: 1.7;
      color: var(--text);
      font-size: 0.98rem;
    }

    .map-info.hidden {
      display: none;
    }

    .map-viz {
      min-height: 460px;
      width: 100%;
      overflow: visible;
      position: relative;
    }

    /* Ensure Vega embed containers fit properly */
    .map-viz > div {
      max-width: 100% !important;
      position: relative;
    }
    
    .map-viz canvas {
      max-width: 100% !important;
      display: block;
    }
    
    /* Fix tooltip positioning */
    #vg-tooltip-element {
      position: fixed !important;
    }

    /* Chart Containers */
    .chart-section {
      display: grid;
      grid-template-columns: 1fr 320px;
      gap: 20px;
      align-items: start;
    }

    #gdp-chart,
    #bubble-chart {
      min-height: 400px;
      width: 100%;
    }

    #gdp-chart > div,
    #bubble-chart > div {
      max-width: 100% !important;
    }

    .chart-info {
      background: linear-gradient(135deg, #f0fdfa 0%, #ffffff 100%);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
      height: fit-content;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .chart-info h3 {
      margin: 0 0 16px 0;
      font-size: 1.3rem;
      font-weight: 600;
      color: var(--accent);
    }

    .chart-info p {
      margin: 0;
      line-height: 1.7;
      color: var(--text);
      font-size: 0.98rem;
    }

    /* Error Messages */
    .error-message {
      padding: 12px;
      color: var(--error);
      border-radius: 8px;
      background: rgba(185, 28, 28, 0.05);
    }

    .error-message small {
      display: block;
      margin-top: 4px;
      font-size: 0.85rem;
    }

    /* Footer */
    footer {
      margin-top: 28px;
      color: var(--muted);
      font-size: 0.9rem;
      text-align: center;
    }

    footer a {
      color: inherit;
      text-decoration: underline;
      text-decoration-color: var(--border);
      transition: text-decoration-color 0.2s ease;
    }

    footer a:hover {
      text-decoration-color: var(--muted);
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
      .wrap {
        padding: 20px 16px 40px;
      }

      header {
        padding: 36px 16px;
      }

      header h1 {
        padding: 12px 20px;
        font-size: 1.8rem;
      }

      header p {
        padding: 16px 20px;
        font-size: 1rem;
      }

      .chart-section {
        grid-template-columns: 1fr;
      }

      .map-viz {
        min-height: 360px;
      }

      .section-title {
        font-size: 1.5rem;
        margin: 36px 0 20px;
      }

      .toggle button {
        padding: 8px 14px;
        font-size: 0.9rem;
      }

      #gdp-chart,
      #bubble-chart {
        min-height: 320px;
      }
    }

    @media (max-width: 480px) {
      header h1 {
        font-size: 1.4rem;
      }

      header p {
        font-size: 0.9rem;
      }

      .card {
        padding: 12px;
        border-radius: 12px;
      }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Australian Tourism</h1>
      <p>From picturesque beaches to hopping kangaroos, Australia's tourism industry has been attracting visitors from across the world for many years. Contributing over $70 billion to the economy in 2024, tourist attractions across Australia support countless jobs. Browse below to discover the key sources of Australian tourism, both from international visitors and friends from out-of-state!</p>
    </header>

    <div class="controls" role="tablist" aria-label="Map Toggle">
      <div class="toggle">
        <button id="btn-international" role="tab" aria-selected="true" aria-controls="map" class="active">International</button>
        <button id="btn-domestic" role="tab" aria-selected="false" aria-controls="map">Domestic</button>
      </div>
    </div>

    <section class="card">
      <div class="map-info-container">
        <div class="map-info" id="info-international">
          <h3>International Visitors</h3>
          <p>Australia's top tourist source is New Zealand, with an estimated 1.2 million visitors in 2024. Other significant sources include China, the USA, and the UK. (Fun Fact! Australians' biggest tourist destination is Indonesia)</p>
        </div>
        <div class="map-info hidden" id="info-domestic">
          <h3>Domestic Tourism</h3>
          <p>The greatest number of interstate visits were to New South Wales, followed closely by Victoria. Despite having 30% less visitors than Victoria, Queensland enjoyed higher total spending, likely due to its status as a domestic holiday destination.</p>
        </div>
      </div>
      <div id="map" class="map-viz" aria-live="polite"></div>
    </section>

    <h2 class="section-title">Tourism & GDP Analysis</h2>

    <section class="card">
      <div class="chart-section">
        <div id="gdp-chart"></div>
        <div class="chart-info">
          <h3>Tourism GDP Trends</h3>
          <p>This visualization shows the trend of Australia's Tourism GDP (in billions of AUD) from 2004 to 2022. Australia's tourism industry shows steady growth aside from the COVID-19 era, where travel restrictions severely impacted the industry. Since then, however, Australian tourism has bounced back stronger than ever!</p>
        </div>
      </div>
    </section>

    <h2 class="section-title">Tourism Industry Employment By Region</h2>

    <section class="card">
      <div id="bubble-chart"></div>
    </section>

    <footer>
      <p>Built by Vlad Monakhov 19/10/25. Sources: </p>
      <p>https://www.tra.gov.au/en/international/international-tourism-results#ref8</p>
      <p>https://www.tra.gov.au/en/domestic/domestic-tourism-statistics-results</p>
      <p>https://www.tra.gov.au/en/economic-analysis/quarterly-tourism-labour-force-statistics</p>
      <p>Generative AI was used in this project.</p>

    </footer>
  </div>

  <script>
    // --- Paths to Vega-Lite specs ---
    const INTL_SPEC = 'int_map.json';
    const DOM_SPEC = 'js/Domestic_Map_Done.json';
    const GDP_SPEC = 'js/tourism_GDP.json';
    const BUBBLE_SPEC = 'js/bubble_regions.json';

    const mapEl = document.querySelector('#map');
    const gdpEl = document.querySelector('#gdp-chart');
    const bubbleEl = document.querySelector('#bubble-chart');
    const btnIntl = document.querySelector('#btn-international');
    const btnDom = document.querySelector('#btn-domestic');
    const infoIntl = document.querySelector('#info-international');
    const infoDom = document.querySelector('#info-domestic');

    function setActive(which) {
      if (which === 'intl') {
        btnIntl.classList.add('active');
        btnIntl.setAttribute('aria-selected', 'true');
        btnDom.classList.remove('active');
        btnDom.setAttribute('aria-selected', 'false');
        infoIntl.classList.remove('hidden');
        infoDom.classList.add('hidden');
      } else {
        btnDom.classList.add('active');
        btnDom.setAttribute('aria-selected', 'true');
        btnIntl.classList.remove('active');
        btnIntl.setAttribute('aria-selected', 'false');
        infoDom.classList.remove('hidden');
        infoIntl.classList.add('hidden');
      }
    }

    async function showSpec(path, targetEl) {
      targetEl.innerHTML = '';
      try {
        const result = await vegaEmbed(targetEl, path, { 
          actions: false, 
          tooltip: true,
          renderer: 'canvas'
        });
        // Force a resize to ensure proper positioning
        setTimeout(() => {
          if (result && result.view) {
            result.view.resize();
          }
        }, 100);
      } catch (err) {
        targetEl.innerHTML = `<div style="padding:12px;color:#b91c1c">Failed to load: ${path}<br><small>${err.message}</small></div>`;
      }
    }

    btnIntl.addEventListener('click', () => { setActive('intl'); showSpec(INTL_SPEC, mapEl); });
    btnDom.addEventListener('click', () => { setActive('dom'); showSpec(DOM_SPEC, mapEl); });

    // Initialize all charts
    setActive('intl');
    showSpec(INTL_SPEC, mapEl);
    showSpec(GDP_SPEC, gdpEl);
    showSpec(BUBBLE_SPEC, bubbleEl);
  </script>
</body>
</html>
